# Agent Configuration
agent.url=${AGENT_URL:http://localhost:8080}

# HTTP Server
quarkus.http.port=8080
quarkus.http.host=0.0.0.0

# Database Configuration (PostgreSQL)
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/a2a}
quarkus.datasource.username=${DATABASE_USER:a2a}
quarkus.datasource.password=${DATABASE_PASSWORD:a2a}
quarkus.datasource.jdbc.max-size=16

# Hibernate ORM - Configure persistence unit "a2a-java"
quarkus.hibernate-orm."a2a-java".datasource=<default>
quarkus.hibernate-orm."a2a-java".database.generation=update
quarkus.hibernate-orm."a2a-java".log.sql=false
quarkus.hibernate-orm."a2a-java".packages=io.a2a.extras.taskstore.database.jpa,io.a2a.extras.pushnotificationconfigstore.database.jpa

# Kafka Configuration for Event Replication
kafka.bootstrap.servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}

# MicroProfile Reactive Messaging - Outgoing (Publish to Kafka)
mp.messaging.outgoing.replicated-events-out.connector=smallrye-kafka
mp.messaging.outgoing.replicated-events-out.topic=a2a-replicated-events
mp.messaging.outgoing.replicated-events-out.value.serializer=org.apache.kafka.common.serialization.StringSerializer

# MicroProfile Reactive Messaging - Incoming (Subscribe from Kafka)
mp.messaging.incoming.replicated-events-in.connector=smallrye-kafka
mp.messaging.incoming.replicated-events-in.topic=a2a-replicated-events
# Each pod needs a unique consumer group to receive ALL events (broadcast behavior)
# Using POD_NAME from Kubernetes Downward API ensures each instance gets its own group
mp.messaging.incoming.replicated-events-in.group.id=a2a-cloud-${POD_NAME:local}
mp.messaging.incoming.replicated-events-in.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer
mp.messaging.incoming.replicated-events-in.auto.offset.reset=earliest

# Logging
# Default to INFO level for production-like behavior
# To enable DEBUG logging for troubleshooting, set these to DEBUG:
#   quarkus.log.category."io.a2a.examples.cloud".level=DEBUG
#   quarkus.log.category."io.a2a.server.events".level=DEBUG
#   quarkus.log.category."io.a2a.extras.queuemanager.replicated".level=DEBUG
#   quarkus.log.category."io.a2a.server.requesthandlers".level=DEBUG
quarkus.log.level=INFO
quarkus.log.category."io.a2a".level=INFO
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# Health checks
quarkus.smallrye-health.root-path=/health
